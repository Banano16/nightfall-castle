enum ActionKind {
    Walking,
    Idle,
    Jumping
}
namespace SpriteKind {
    export const Background = SpriteKind.create()
    export const hitbox = SpriteKind.create()
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (hitbox2.isHittingTile(CollisionDirection.Bottom) == true) {
        salto = 0
        caida = 0
        hitbox2.ay = -1000
        pause(100)
        caida = 1
    }
})
controller.down.onEvent(ControllerButtonEvent.Released, function () {
    agachado = 0
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    Dirección = 1
})
sprites.onCreated(SpriteKind.hitbox, function (sprite) {
    info.setLife(16)
})
scene.onOverlapTile(SpriteKind.hitbox, sprites.builtin.forestTiles14, function (sprite, location) {
    info.setLife(0)
})
statusbars.onZero(StatusBarKind.EnemyHealth, function (status) {
    sprites.destroy(pato, effects.ashes, 100)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    Dirección = 0
})
sprites.onOverlap(SpriteKind.Enemy, SpriteKind.Player, function (sprite, otherSprite) {
    pato.startEffect(effects.coolRadial, 1000)
    statusbar.value += -4
    pause(500)
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    agachado = 1
    pauseUntil(() => controller.down.isPressed() == false)
})
sprites.onOverlap(SpriteKind.hitbox, SpriteKind.Enemy, function (sprite, otherSprite) {
    hitbox2.startEffect(effects.coolRadial, 1000)
    info.changeLifeBy(-4)
    pause(500)
})
info.onLifeZero(function () {
    player2.stop()
    game.setGameOverPlayable(false, music.melodyPlayable(music.spooky), false)
    music.play(music.stringPlayable(music.convertRTTTLToMelody("s:d=4,o=4,b=320:d,p,d,p,d#,d,c,p,p,f,p,f,p,g"), 600), music.PlaybackMode.InBackground)
    game.gameOver(false)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
	
})
let ataque = 0
let player2: ArcadeMIDIBlocks.ArcadeMIDIBlocksWrapper = null
let Dirección = 0
let agachado = 0
let statusbar: StatusBarSprite = null
let pato: Sprite = null
let hitbox2: Sprite = null
let salto = 0
let caida = 0
scroller.setLayerImage(scroller.BackgroundLayer.Layer3, assets.image`Nubes 3`)
scroller.setLayerImage(scroller.BackgroundLayer.Layer1, assets.image`Castillo`)
scroller.setLayerImage(scroller.BackgroundLayer.Layer0, img`
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ......................................................................................................................................................................................................................8888888..................................
    ....................................................................................................................................................................................................................66669999996................................
    ...................................................................................................................................................................................................................6966999999999...............................
    ..................................................................................................................................................................................................................669999999999999..............................
    .................................................................................................................................................................................................................66669999999999999.............................
    ................................................................................................................................................................................................................6966699999999999996............................
    ................................................................................................................................................................................................................9999999999999999999............................
    ...............................................................................................................................................................................................................899999999999999999998...........................
    ...............................................................................................................................................................................................................699999999999999999999...........................
    ...............................................................................................................................................................................................................699999999999999999999...........................
    ...............................................................................................................................................................................................................699999999999999999999...........................
    ...............................................................................................................................................................................................................699999999999999999999...........................
    ...............................................................................................................................................................................................................699999999999999999999...........................
    ...............................................................................................................................................................................................................899999999999999999996...........................
    ................................................................................................................................................................................................................9999999999999999999............................
    ................................................................................................................................................................................................................6999999999999999999............................
    .................................................................................................................................................................................................................99999999999999999.............................
    ..................................................................................................................................................................................................................999999999999999..............................
    ...................................................................................................................................................................................................................9999999999999...............................
    ....................................................................................................................................................................................................................99999999996................................
    ......................................................................................................................................................................................................................86666668.................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    ...............................................................................................................................................................................................................................................................
    `)
scroller.setCameraScrollingMultipliers(0.05, 1, scroller.BackgroundLayer.Layer0)
scroller.setCameraScrollingMultipliers(0.5, 1, scroller.BackgroundLayer.Layer3)
scroller.setCameraScrollingMultipliers(0.06, 1, scroller.BackgroundLayer.Layer1)
scroller.scrollBackgroundWithCamera(scroller.CameraScrollMode.OnlyHorizontal, scroller.BackgroundLayer.Layer0)
scroller.scrollBackgroundWithCamera(scroller.CameraScrollMode.OnlyHorizontal, scroller.BackgroundLayer.Layer1)
scroller.scrollBackgroundWithCamera(scroller.CameraScrollMode.OnlyHorizontal, scroller.BackgroundLayer.Layer2)
scroller.scrollBackgroundWithCamera(scroller.CameraScrollMode.OnlyHorizontal, scroller.BackgroundLayer.Layer3)
scroller.scrollBackgroundWithCamera(scroller.CameraScrollMode.OnlyHorizontal, scroller.BackgroundLayer.Layer4)
tiles.setCurrentTilemap(tilemap`level1`)
caida = 1
salto = 0
let movimiento = 1
hitbox2 = sprites.create(img`
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ......................................................ffff..............................................................
    .....................................................fbbccf.............................................................
    ....................................................fbbdbccf............................................................
    ....................................................fbbbbfff............................................................
    ....................................................fccbbdbff...........................................................
    ....................................................fcdcddbbf...........................................................
    ....................................................fcddbbccf...........................................................
    ...................................................fefcbbbcf............................................................
    ..................................................feeefcbcff............................................................
    .................................................feeeeeffffff...........................................................
    ................................................fbbbeeedbbdfff..........................................................
    ...............................................fbbbbcbbbddccbf..........................................................
    ..............................................fddbbbfbbbbbccbbf.........................................................
    ..............................................ffdddfcddbbbcbfbf.........................................................
    ..............................................feffffccbdddbcfff.........................................................
    .............................................feeeefffcccbbcffff.........................................................
    .............................................feeeefffcccccfffff.........................................................
    .............................................feeefffeeccccffffcf........................................................
    ............................................fbbef.ffeeedbbdefccf........................................................
    ............................................fbbbf.fbbeeddddefccf........................................................
    ............................................fbbbffdbbdbffffbfccff.......................................................
    ............................................fbbcffdddbbccffbbffff.......................................................
    ............................................fcceefbbbbcccffccffef.......................................................
    ............................................feeeedbbdfccffffbceef.......................................................
    ............................................feeefdddfccfffffbbfff.......................................................
    .............................................feeffffccfffffffbff........................................................
    ..............................................ff.fccccfffffffff.........................................................
    .................................................fcccff.ffffff..........................................................
    ................................................fbddcff.ffcbbcf.........................................................
    ................................................fbddbcf.fcbbbcf.........................................................
    ................................................fcbbcf..fccccf..........................................................
    ................................................fcccff..ffffff..........................................................
    ................................................fcccff..fffff...........................................................
    ................................................fccff...fffff...........................................................
    ................................................fbbff...fffcf...........................................................
    ...............................................ffffbf...fccfcff.........................................................
    ..............................................fbddcff...fffbbccf........................................................
    ..............................................fbddbcf...ffcbbbcf........................................................
    `, SpriteKind.hitbox)
let PlayerSprite = sprites.create(img`
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ........................................................................................................................
    ......................................................ffff..............................................................
    .....................................................fbbccf.............................................................
    ....................................................fbbdbccf............................................................
    ....................................................fbbbbfff............................................................
    ....................................................fccbbdbff...........................................................
    ....................................................fcdcddbbf...........................................................
    ....................................................fcddbbccf...........................................................
    ...................................................fefcbbbcf............................................................
    ..................................................feeefcbcff............................................................
    .................................................feeeeeffffff...........................................................
    ................................................fbbbeeedbbdfff..........................................................
    ...............................................fbbbbcbbbddccbf..........................................................
    ..............................................fddbbbfbbbbbccbbf.........................................................
    ..............................................ffdddfcddbbbcbfbf.........................................................
    ..............................................feffffccbdddbcfff.........................................................
    .............................................feeeefffcccbbcffff.........................................................
    .............................................feeeefffcccccfffff.........................................................
    .............................................feeefffeeccccffffcf........................................................
    ............................................fbbef.ffeeedbbdefccf........................................................
    ............................................fbbbf.fbbeeddddefccf........................................................
    ............................................fbbbffdbbdbffffbfccff.......................................................
    ............................................fbbcffdddbbccffbbffff.......................................................
    ............................................fcceefbbbbcccffccffef.......................................................
    ............................................feeeedbbdfccffffbceef.......................................................
    ............................................feeefdddfccfffffbbfff.......................................................
    .............................................feeffffccfffffffbff........................................................
    ..............................................ff.fccccfffffffff.........................................................
    .................................................fcccff.ffffff..........................................................
    ................................................fbddcff.ffcbbcf.........................................................
    ................................................fbddbcf.fcbbbcf.........................................................
    ................................................fcbbcf..fccccf..........................................................
    ................................................fcccff..ffffff..........................................................
    ................................................fcccff..fffff...........................................................
    ................................................fccff...fffff...........................................................
    ................................................fbbff...fffcf...........................................................
    ...............................................ffffbf...fccfcff.........................................................
    ..............................................fbddcff...fffbbccf........................................................
    ..............................................fbddbcf...ffcbbbcf........................................................
    `, SpriteKind.Player)
hitbox2.setFlag(SpriteFlag.Invisible, true)
hitbox2.setPosition(58, 390)
PlayerSprite.setFlag(SpriteFlag.Ghost, false)
pato = sprites.create(assets.image`enemigo1`, SpriteKind.Enemy)
pato.setPosition(350, 380)
pato.vx = 100
namespace userconfig {
    export const ARCADE_SCREEN_WIDTH = 256
    export const ARCADE_SCREEN_HEIGHT = 240
}
scene.cameraFollowSprite(hitbox2)
cameraOffsetScene.cameraFollowWithOffset(hitbox2, 50, 0)
pato.vy = 20
statusbar = statusbars.create(0, 0, StatusBarKind.EnemyHealth)
statusbar.attachToSprite(pato, 0, 0)
statusbar.max = 16
game.onUpdate(function () {
    PlayerSprite.setPosition(hitbox2.x, hitbox2.y)
})
game.onUpdate(function () {
    if (pato.tileKindAt(TileDirection.Bottom, assets.tile`transparency16`)) {
        pato.vx = pato.vx * -1
    }
})
game.onUpdate(function () {
	
})
forever(function () {
    player2 = ArcadeMIDIBlocks.create_wrapper()
    player2.set_images(assets.animation`Song1`)
    player2.play(ArcadeMIDIBlocks.ThreadLocation.Background)
    pause(80000)
})
forever(function () {
    if (controller.down.isPressed() == true && characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingRight))) {
        if (hitbox2.isHittingTile(CollisionDirection.Bottom)) {
            movimiento = 2
            if (Dirección == 0) {
                animation.runImageAnimation(
                PlayerSprite,
                assets.animation`mover agachado derecha`,
                50,
                true
                )
                pauseUntil(() => (controller.down.isPressed() == false || controller.right.isPressed() == false || controller.left.isPressed() == true) == true)
                movimiento = 1
                if (controller.down.isPressed() == true) {
                    animation.runImageAnimation(
                    PlayerSprite,
                    assets.animation`agachado derecha0`,
                    100,
                    false
                    )
                }
            }
        }
    }
    if (controller.down.isPressed() == true && characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingLeft))) {
        if (hitbox2.isHittingTile(CollisionDirection.Bottom)) {
            movimiento = 2
            if (Dirección == 1) {
                animation.runImageAnimation(
                PlayerSprite,
                assets.animation`mover agachado izquierda`,
                50,
                true
                )
                pauseUntil(() => (controller.down.isPressed() == false || controller.left.isPressed() == false || controller.right.isPressed() == true) == true)
                movimiento = 1
                if (controller.down.isPressed() == true) {
                    animation.runImageAnimation(
                    PlayerSprite,
                    assets.animation`agachado izquierda0`,
                    100,
                    false
                    )
                }
            }
        }
    }
    if (controller.down.isPressed() == true) {
        if (hitbox2.isHittingTile(CollisionDirection.Bottom)) {
            if (Dirección == 1) {
                animation.runImageAnimation(
                PlayerSprite,
                assets.animation`agachado izquierda`,
                100,
                false
                )
                pauseUntil(() => controller.down.isPressed() == false || controller.right.isPressed() == true || controller.left.isPressed() == true)
                if (controller.down.isPressed() == false) {
                    animation.runImageAnimation(
                    PlayerSprite,
                    assets.animation`myAnim`,
                    500,
                    false
                    )
                }
            }
            if (Dirección == 0) {
                animation.runImageAnimation(
                PlayerSprite,
                assets.animation`agachado derecha`,
                100,
                false
                )
                pauseUntil(() => controller.down.isPressed() == false || controller.right.isPressed() == true || controller.left.isPressed() == true)
                if (controller.down.isPressed() == false) {
                    animation.runImageAnimation(
                    PlayerSprite,
                    [img`
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ........................................................................................................................
                        ......................................................ffff..............................................................
                        .....................................................fbbccf.............................................................
                        ....................................................fbbdbccf............................................................
                        ....................................................fbbbbfff............................................................
                        ....................................................fccbbdbff...........................................................
                        ....................................................fcdcddbbf...........................................................
                        ....................................................fcddbbccf...........................................................
                        ...................................................fefcbbbcf............................................................
                        ..................................................feeefcbcff............................................................
                        .................................................feeeeeffffff...........................................................
                        ................................................fbbbeeedbbdfff..........................................................
                        ...............................................fbbbbcbbbddccbf..........................................................
                        ..............................................fddbbbfbbbbbccbbf.........................................................
                        ..............................................ffdddfcddbbbcbfbf.........................................................
                        ..............................................feffffccbdddbcfff.........................................................
                        .............................................feeeefffcccbbcffff.........................................................
                        .............................................feeeefffcccccfffff.........................................................
                        .............................................feeefffeeccccffffcf........................................................
                        ............................................fbbef.ffeeedbbdefccf........................................................
                        ............................................fbbbf.fbbeeddddefccf........................................................
                        ............................................fbbbffdbbdbffffbfccff.......................................................
                        ............................................fbbcffdddbbccffbbffff.......................................................
                        ............................................fcceefbbbbcccffccffef.......................................................
                        ............................................feeeedbbdfccffffbceef.......................................................
                        ............................................feeefdddfccfffffbbfff.......................................................
                        .............................................feeffffccfffffffbff........................................................
                        ..............................................ff.fccccfffffffff.........................................................
                        .................................................fcccff.ffffff..........................................................
                        ................................................fbddcff.ffcbbcf.........................................................
                        ................................................fbddbcf.fcbbbcf.........................................................
                        ................................................fcbbcf..fccccf..........................................................
                        ................................................fcccff..ffffff..........................................................
                        ................................................fcccff..fffff...........................................................
                        ................................................fccff...fffff...........................................................
                        ................................................fbbff...fffcf...........................................................
                        ...............................................ffffbf...fccfcff.........................................................
                        ..............................................fbddcff...fffbbccf........................................................
                        ..............................................fbddbcf...ffcbbbcf........................................................
                        `],
                    500,
                    false
                    )
                }
            }
        }
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingDown)) && Dirección == 1 && ataque == 0) {
        animation.runImageAnimation(
        PlayerSprite,
        assets.animation`caida izquierda salto`,
        50,
        true
        )
        pauseUntil(() => characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.HittingWallDown)) || controller.B.isPressed() == true || salto == 0)
        if (controller.down.isPressed() == true) {
            animation.runImageAnimation(
            PlayerSprite,
            assets.animation`agachado izquierda0`,
            100,
            false
            )
        } else {
            animation.runImageAnimation(
            PlayerSprite,
            assets.animation`myAnim`,
            500,
            false
            )
        }
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingDown)) && Dirección == 0 && ataque == 0) {
        animation.runImageAnimation(
        PlayerSprite,
        assets.animation`caída derecha salto`,
        50,
        true
        )
        pauseUntil(() => characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.HittingWallDown)) || controller.B.isPressed() == true || salto == 0)
        if (controller.down.isPressed() == true) {
            animation.runImageAnimation(
            PlayerSprite,
            assets.animation`agachado derecha0`,
            100,
            false
            )
        } else {
            animation.runImageAnimation(
            PlayerSprite,
            [img`
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ........................................................................................................................
                ......................................................ffff..............................................................
                .....................................................fbbccf.............................................................
                ....................................................fbbdbccf............................................................
                ....................................................fbbbbfff............................................................
                ....................................................fccbbdbff...........................................................
                ....................................................fcdcddbbf...........................................................
                ....................................................fcddbbccf...........................................................
                ...................................................fefcbbbcf............................................................
                ..................................................feeefcbcff............................................................
                .................................................feeeeeffffff...........................................................
                ................................................fbbbeeedbbdfff..........................................................
                ...............................................fbbbbcbbbddccbf..........................................................
                ..............................................fddbbbfbbbbbccbbf.........................................................
                ..............................................ffdddfcddbbbcbfbf.........................................................
                ..............................................feffffccbdddbcfff.........................................................
                .............................................feeeefffcccbbcffff.........................................................
                .............................................feeeefffcccccfffff.........................................................
                .............................................feeefffeeccccffffcf........................................................
                ............................................fbbef.ffeeedbbdefccf........................................................
                ............................................fbbbf.fbbeeddddefccf........................................................
                ............................................fbbbffdbbdbffffbfccff.......................................................
                ............................................fbbcffdddbbccffbbffff.......................................................
                ............................................fcceefbbbbcccffccffef.......................................................
                ............................................feeeedbbdfccffffbceef.......................................................
                ............................................feeefdddfccfffffbbfff.......................................................
                .............................................feeffffccfffffffbff........................................................
                ..............................................ff.fccccfffffffff.........................................................
                .................................................fcccff.ffffff..........................................................
                ................................................fbddcff.ffcbbcf.........................................................
                ................................................fbddbcf.fcbbbcf.........................................................
                ................................................fcbbcf..fccccf..........................................................
                ................................................fcccff..ffffff..........................................................
                ................................................fcccff..fffff...........................................................
                ................................................fccff...fffff...........................................................
                ................................................fbbff...fffcf...........................................................
                ...............................................ffffbf...fccfcff.........................................................
                ..............................................fbddcff...fffbbccf........................................................
                ..............................................fbddbcf...ffcbbbcf........................................................
                `],
            500,
            false
            )
        }
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingUp)) && Dirección == 0) {
        animation.runImageAnimation(
        PlayerSprite,
        assets.animation`salto derecha`,
        500,
        true
        )
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingUp)) && Dirección == 1) {
        animation.runImageAnimation(
        PlayerSprite,
        assets.animation`salto izquierda`,
        500,
        true
        )
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingRight, Predicate.HittingWallDown))) {
        if (controller.down.isPressed() == false) {
            animation.runImageAnimation(
            PlayerSprite,
            assets.animation`movimiento derecha caballero mal`,
            50,
            true
            )
            Dirección = 0
            pauseUntil(() => controller.left.isPressed() == true || (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.NotMoving)) || characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.HittingWallDown)) == false || characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.HittingWallRight))) || ((controller.B.isPressed() || controller.down.isPressed()) == true || (controller.right.isPressed() == false || controller.A.isPressed() == true)))
        }
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.MovingLeft, Predicate.HittingWallDown))) {
        if (controller.down.isPressed() == false) {
            animation.runImageAnimation(
            PlayerSprite,
            assets.animation`movimiento izquierda caballero`,
            50,
            true
            )
            Dirección = 1
            pauseUntil(() => controller.right.isPressed() == true || characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.NotMoving)) || (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.HittingWallDown)) == false || (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.HittingWallLeft)) || ((controller.B.isPressed() || controller.down.isPressed()) == true || (controller.left.isPressed() == false || controller.A.isPressed() == true)))))
        }
    }
    if (characterAnimations.matchesRule(hitbox2, characterAnimations.rule(Predicate.NotMoving, Predicate.HittingWallDown))) {
        if (ataque == 0) {
            if (Dirección == 0) {
                animation.runImageAnimation(
                PlayerSprite,
                [img`
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ......................................................ffff..............................................................
                    .....................................................fbbccf.............................................................
                    ....................................................fbbdbccf............................................................
                    ....................................................fbbbbfff............................................................
                    ....................................................fccbbdbff...........................................................
                    ....................................................fcdcddbbf...........................................................
                    ....................................................fcddbbccf...........................................................
                    ...................................................fefcbbbcf............................................................
                    ..................................................feeefcbcff............................................................
                    .................................................feeeeeffffff...........................................................
                    ................................................fbbbeeedbbdfff..........................................................
                    ...............................................fbbbbcbbbddccbf..........................................................
                    ..............................................fddbbbfbbbbbccbbf.........................................................
                    ..............................................ffdddfcddbbbcbfbf.........................................................
                    ..............................................feffffccbdddbcfff.........................................................
                    .............................................feeeefffcccbbcffff.........................................................
                    .............................................feeeefffcccccfffff.........................................................
                    .............................................feeefffeeccccffffcf........................................................
                    ............................................fbbef.ffeeedbbdefccf........................................................
                    ............................................fbbbf.fbbeeddddefccf........................................................
                    ............................................fbbbffdbbdbffffbfccff.......................................................
                    ............................................fbbcffdddbbccffbbffff.......................................................
                    ............................................fcceefbbbbcccffccffef.......................................................
                    ............................................feeeedbbdfccffffbceef.......................................................
                    ............................................feeefdddfccfffffbbfff.......................................................
                    .............................................feeffffccfffffffbff........................................................
                    ..............................................ff.fccccfffffffff.........................................................
                    .................................................fcccff.ffffff..........................................................
                    ................................................fbddcff.ffcbbcf.........................................................
                    ................................................fbddbcf.fcbbbcf.........................................................
                    ................................................fcbbcf..fccccf..........................................................
                    ................................................fcccff..ffffff..........................................................
                    ................................................fcccff..fffff...........................................................
                    ................................................fccff...fffff...........................................................
                    ................................................fbbff...fffcf...........................................................
                    ...............................................ffffbf...fccfcff.........................................................
                    ..............................................fbddcff...fffbbccf........................................................
                    ..............................................fbddbcf...ffcbbbcf........................................................
                    `],
                500,
                true
                )
            }
            if (Dirección == 1) {
                animation.runImageAnimation(
                PlayerSprite,
                assets.animation`myAnim`,
                500,
                true
                )
            }
        }
    }
    if (controller.B.isPressed()) {
        if (ataque == 0) {
            ataque = 1
            if (Dirección == 0) {
                animation.runImageAnimation(
                PlayerSprite,
                assets.animation`ataque derecha`,
                50,
                false
                )
                pause(300)
                animation.runImageAnimation(
                PlayerSprite,
                [img`
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ........................................................................................................................
                    ......................................................ffff..............................................................
                    .....................................................fbbccf.............................................................
                    ....................................................fbbdbccf............................................................
                    ....................................................fbbbbfff............................................................
                    ....................................................fccbbdbff...........................................................
                    ....................................................fcdcddbbf...........................................................
                    ....................................................fcddbbccf...........................................................
                    ...................................................fefcbbbcf............................................................
                    ..................................................feeefcbcff............................................................
                    .................................................feeeeeffffff...........................................................
                    ................................................fbbbeeedbbdfff..........................................................
                    ...............................................fbbbbcbbbddccbf..........................................................
                    ..............................................fddbbbfbbbbbccbbf.........................................................
                    ..............................................ffdddfcddbbbcbfbf.........................................................
                    ..............................................feffffccbdddbcfff.........................................................
                    .............................................feeeefffcccbbcffff.........................................................
                    .............................................feeeefffcccccfffff.........................................................
                    .............................................feeefffeeccccffffcf........................................................
                    ............................................fbbef.ffeeedbbdefccf........................................................
                    ............................................fbbbf.fbbeeddddefccf........................................................
                    ............................................fbbbffdbbdbffffbfccff.......................................................
                    ............................................fbbcffdddbbccffbbffff.......................................................
                    ............................................fcceefbbbbcccffccffef.......................................................
                    ............................................feeeedbbdfccffffbceef.......................................................
                    ............................................feeefdddfccfffffbbfff.......................................................
                    .............................................feeffffccfffffffbff........................................................
                    ..............................................ff.fccccfffffffff.........................................................
                    .................................................fcccff.ffffff..........................................................
                    ................................................fbddcff.ffcbbcf.........................................................
                    ................................................fbddbcf.fcbbbcf.........................................................
                    ................................................fcbbcf..fccccf..........................................................
                    ................................................fcccff..ffffff..........................................................
                    ................................................fcccff..fffff...........................................................
                    ................................................fccff...fffff...........................................................
                    ................................................fbbff...fffcf...........................................................
                    ...............................................ffffbf...fccfcff.........................................................
                    ..............................................fbddcff...fffbbccf........................................................
                    ..............................................fbddbcf...ffcbbbcf........................................................
                    `],
                500,
                false
                )
            } else {
                if (Dirección == 1) {
                    animation.runImageAnimation(
                    PlayerSprite,
                    assets.animation`ataque izquierda`,
                    50,
                    false
                    )
                    pause(300)
                    animation.runImageAnimation(
                    PlayerSprite,
                    assets.animation`myAnim`,
                    500,
                    false
                    )
                }
            }
            ataque = 0
        } else {
            pauseUntil(() => ataque == 0)
        }
        pauseUntil(() => controller.B.isPressed() == false)
    }
})
forever(function () {
    if (hitbox2.isHittingTile(CollisionDirection.Bottom) == false && caida == 1) {
        if (controller.A.isPressed() == true) {
            salto = 1
            hitbox2.ay = 250
        }
        if (controller.A.isPressed() == false) {
            salto = 1
            hitbox2.ay = 600
        }
    }
    if (movimiento == 1) {
        controller.moveSprite(hitbox2, 100, 0)
    }
    if (movimiento == 2) {
        controller.moveSprite(hitbox2, 50, 0)
    }
})
